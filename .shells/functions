ssh() {
  if [[ -z "$@" ]]; then
    # common case: getting to my workstation
    command ssh humus
  else
    command ssh $@
  fi
}

ssh-reagent() {
  for agent in /tmp/ssh-*/agent.*; do
    echo Trying $agent
    export SSH_AUTH_SOCK=$agent
    if $HOME/.bash/timeout3 -t 1 ssh-add -l &> /dev/null; then
      echo Found working SSH Agent:
      ssh-add -l
      return
    else
      echo 'Looks dead; removing'
      rm -r $agent
    fi
  done
  echo Cannot find ssh agent - maybe you should reconnect and forward it?
}

tmux() {
  if [[ -z "$@" ]]; then
    # attach to existing session, or create one, based on current directory
    command tmux new -A -s "$(basename $(pwd))"
  else
    command tmux $@
  fi
}
